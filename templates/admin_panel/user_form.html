{% extends "admin_panel/base.html" %}
{% load form_extras %}
{% load static %}
{% block title %}{{ mode|default:"create"|capfirst }} Admin User — Al-Hadid{% endblock %}

{% block content %}
<div class="flex items-center justify-between mb-6">
  <h1 class="text-2xl font-semibold text-slate-800 dark:text-slate-100">
    {% if mode == 'update' %}Update Admin{% else %}Create New Admin{% endif %}
  </h1>
  <a href="{% url 'admin_panel:admin_users_list' %}" class="inline-flex items-center rounded-lg border px-3 py-2 text-sm dark:border-slate-700">
    ← Back to List
  </a>
</div>

<form method="post" class="grid grid-cols-1 lg:grid-cols-3 gap-6">
  {% csrf_token %}

  <div class="lg:col-span-1 space-y-4">
    <div class="card p-4">
      <h2 class="text-sm font-semibold text-slate-700 dark:text-slate-200 mb-3">User Information</h2>
      <div class="space-y-3">
        <div>
          <label class="label">Username</label>
          {{ form.username|add_class:"input" }}
        </div>
        <div>
          <label class="label">Email</label>
          {{ form.email|add_class:"input" }}
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div>
            <label class="label">First name</label>
            {{ form.first_name|add_class:"input" }}
          </div>
          <div>
            <label class="label">Last name</label>
            {{ form.last_name|add_class:"input" }}
          </div>
        </div>
        {% if form.password1 %}
          <div>
            <label class="label">Password</label>
            {{ form.password1|add_class:"input" }}
          </div>
          <div>
            <label class="label">Confirm password</label>
            {{ form.password2|add_class:"input" }}
          </div>
        {% endif %}
        <div class="flex items-center gap-2">
          {{ form.is_superuser }}
          <label class="text-sm dark:text-slate-300">Superuser (full access)</label>
        </div>
        {% if form.is_active %}
        <div class="flex items-center gap-2">
          {{ form.is_active }}
          <label class="text-sm dark:text-slate-300">Active</label>
        </div>
        {% endif %}
      </div>
    </div>

    <div class="flex gap-3">
      <button class="btn btn-primary grow" type="submit">Save</button>
      <a href="{% url 'admin_panel:admin_users_list' %}" class="btn btn-outline">Cancel</a>
    </div>
  </div>

  <div class="lg:col-span-2 card p-4">
    <h2 class="text-sm font-semibold text-slate-700 dark:text-slate-200 mb-3">Module Roles & Permissions</h2>
    <p class="text-xs text-slate-500 dark:text-slate-400 mb-4">
      Choose <b>No Access</b>, <b>View Only</b>, or <b>Edit</b> for each area. <em>Edit</em> = add/change/delete/view.
    </p>

    <div class="grid sm:grid-cols-2 gap-4">
      {% for field in form %}
        {% if field.name|endswith:"_perm" %}
          <div class="rounded-xl border dark:border-slate-700 p-3">
            <div class="text-sm font-medium mb-2 text-slate-700 dark:text-slate-200">{{ field.label }}</div>
            <div class="space-y-2">
              {{ field }}
            </div>
          </div>
        {% endif %}
      {% endfor %}
    </div>
  </div>
</form>
{% endblock %}

{% block extra_css %}{% endblock %}
