{% extends "admin_panel/base.html" %}
{% block title %}Change Password — {{ site_settings.site_name|default:"Al-Hadid" }}{% endblock %}
{% block content %}
<style>
/* ====== Colors ====== */
:root {
  --primary: #155e2b;
  --primary-600: #166534;
  --primary-700: #14532d;
  --primary-800: #0f3a22;

  --gold: #d4af37;
  --gold-700: #b08d1f;

  --ivory: #faf8f1;

  /* dark palette (used only in dark mode section) */
  --darkbg: #0b1612;
  --darksurface: #0f1f18;
  --darkborder: #153a2b;
  --darktext: #e6f4ee;

  --radius: 12px;
  --input-h: 44px;
  --shadow: 0 8px 24px rgba(0,0,0,0.08);
  --shadow-dark: 0 8px 30px rgba(0,0,0,0.6);

  transition: none; /* no-op for root */
}

/* Smooth transitions for theme change */
form[method="post"], 
form[method="post"] input,
form[method="post"] .helptext,
form[method="post"] .btn {
  transition: background-color .22s ease, color .18s ease, box-shadow .18s ease, border-color .18s ease, transform .12s ease;
}

/* ====== Light (default) theme ====== */
form[method="post"] {
  max-width: 600px;
  margin: 2rem auto;
  padding: 24px;
  background: var(--ivory);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  font-family: Inter, sans-serif;
  color: var(--primary-800);
  box-sizing: border-box;
}

/* Paragraph spacing */
form[method="post"] p {
  margin-bottom: 16px;
}

/* Labels */
form[method="post"] label {
  display: block;
  margin-bottom: 6px;
  font-weight: 600;
  font-size: 0.95rem;
  color: var(--primary-700);
}

/* Inputs */
#id_old_password,
#id_new_password1,
#id_new_password2 {
  width: 100%;
  height: var(--input-h);
  padding: 0 12px;
  border-radius: 10px;
  border: 1px solid rgba(21,94,43,0.25);
  font-size: 0.95rem;
  outline: none;
  box-sizing: border-box;
  background: #fff;
  color: var(--primary-800);
}

/* Input focus */
#id_old_password:focus,
#id_new_password1:focus,
#id_new_password2:focus {
  border-color: var(--primary-600);
  box-shadow: 0 0 6px rgba(21,94,43,0.18);
}

/* Helptext / password rules */
.helptext {
  display: block;
  margin-top: 6px;
  padding: 10px 12px;
  font-size: 0.88rem;
  background: rgba(212,175,55,0.10);
  border-left: 3px solid var(--gold);
  border-radius: 6px;
  color: #37483a;
}

/* Helptext list */
.helptext ul {
  margin: 0;
  padding-left: 18px;
}
.helptext li {
  margin-bottom: 4px;
  line-height: 1.3;
}

/* Button */
form[method="post"] .btn.btn-primary {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 10px 20px;
  font-weight: 700;
  font-size: 0.95rem;
  color: var(--ivory);
  background: linear-gradient(180deg, var(--primary), var(--primary-700));
  border: none;
  border-radius: 10px;
  cursor: pointer;
}

/* Button hover / active */
form[method="post"] .btn.btn-primary:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 18px rgba(15,58,34,0.2);
}
form[method="post"] .btn.btn-primary:active {
  transform: translateY(0) scale(0.98);
}

/* Errorlist (light) */
.errorlist {
  color: #7a1515;
  background: rgba(255,238,238,0.95);
  padding: 10px 12px;
  border-radius: 8px;
  margin-bottom: 12px;
  border: 1px solid rgba(190,40,40,0.10);
  list-style: none;
}
.errorlist li { padding-left: 18px; position: relative; }
.errorlist li::before {
  content: "⚠";
  position: absolute;
  left: 0;
  top: 0;
  color: #b02a2a;
}

/* Responsive */
@media (max-width: 600px) {
  form[method="post"] {
    padding: 16px;
    margin: 12px;
  }
  #id_old_password,
  #id_new_password1,
  #id_new_password2 {
    height: 40px;
  }
}

/* ====== Dark theme: prefers-color-scheme and .dark override ====== */

/* Apply when user prefers dark */
@media (prefers-color-scheme: dark) {
  body:not(.light) form[method="post"] {
    background: var(--darksurface);
    color: var(--darktext);
    border: 1px solid var(--darkborder);
    box-shadow: var(--shadow-dark);
  }

  body:not(.light) form[method="post"] label {
    color: var(--darktext);
  }

  body:not(.light) #id_old_password,
  body:not(.light) #id_new_password1,
  body:not(.light) #id_new_password2 {
    background: rgba(10,18,14,0.45);
    color: var(--darktext);
    border: 1px solid rgba(21,58,43,0.10);
  }

  body:not(.light) #id_old_password:focus,
  body:not(.light) #id_new_password1:focus,
  body:not(.light) #id_new_password2:focus {
    border-color: var(--primary-600);
    box-shadow: 0 0 8px rgba(21,94,43,0.12);
  }

  body:not(.light) .helptext {
    background: rgba(20,30,24,0.16);
    color: var(--darktext);
    border-left-color: var(--gold-700);
  }

  body:not(.light) .btn.btn-primary {
    background: linear-gradient(180deg, var(--primary-700), var(--primary-800));
    color: var(--ivory);
    box-shadow: 0 8px 24px rgba(0,0,0,0.55);
  }

  body:not(.light) .errorlist {
    color: #ffd6d6;
    background: rgba(70,10,10,0.12);
    border: 1px solid rgba(150,20,20,0.12);
  }

  body:not(.light) .errorlist li::before {
    color: #ffb3b3;
  }
}

/* Force dark mode when body has .dark */
body.dark form[method="post"] {
  background: var(--darksurface);
  color: var(--darktext);
  border: 1px solid var(--darkborder);
  box-shadow: var(--shadow-dark);
}
body.dark form[method="post"] label { color: var(--darktext); }
body.dark #id_old_password,
body.dark #id_new_password1,
body.dark #id_new_password2 {
  background: rgba(10,18,14,0.45);
  color: var(--darktext);
  border: 1px solid rgba(21,58,43,0.10);
}
body.dark .helptext {
  background: rgba(20,30,24,0.16);
  color: var(--darktext);
  border-left-color: var(--gold-700);
}
body.dark .btn.btn-primary {
  background: linear-gradient(180deg, var(--primary-700), var(--primary-800));
  color: var(--ivory);
  box-shadow: 0 8px 24px rgba(0,0,0,0.55);
}
body.dark .errorlist {
  color: #ffd6d6;
  background: rgba(70,10,10,0.12);
  border: 1px solid rgba(150,20,20,0.12);
}
body.dark .errorlist li::before { color: #ffb3b3; }

</style>

<h1 class="text-2xl font-semibold mb-4">Change Your Password</h1>
<div class="card p-6">
  <form method="post">{% csrf_token %}
    {{ form.as_p }}
    <button class="btn btn-primary mt-2">Change</button>
  </form>
</div>
{% endblock %}
