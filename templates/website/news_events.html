{% extends "base.html" %}
{% block title %}News & Events — {{ site_settings.site_name|default:"Al-Hadid" }}{% endblock %}
{% block content %}

<style>
  .gold-underline::after{
    content:""; display:block; width:72px; height:3px; margin-top:12px; border-radius:999px;
    background:linear-gradient(90deg,#cab26b,#d1ad51);
  }
  .news-card{ position:relative; overflow:hidden; transition:transform .25s ease }
  .news-card:hover{ transform:translateY(-2px) }
  .news-card::before{
    content:""; position:absolute; inset:0 0 auto 0; height:4px; opacity:.85;
    background:linear-gradient(90deg,#d1ad51,var(--tw-primary,#10b981));
  }
</style>

<section class="max-w-7xl mx-auto px-4 py-10">
  <h1 class="text-3xl font-semibold mb-2">News & Events</h1>
  <div class="gold-underline mb-6"></div>

  <!-- NEWS -->
  <h2 class="text-xl font-semibold mb-1">News</h2>
  <div class="gold-underline mb-4"></div>
  <div class="grid md:grid-cols-3 gap-6 mb-10">
    {% if news %}
      {% for n in news %}
      <article class="card news-card overflow-hidden">
        {% if n.image %}<img src="{{ n.image.url }}" class="h-40 w-full object-cover" alt="">{% endif %}
        <div class="p-4">
          <div class="text-xs text-gray-500">
            {% firstof n.published_at n.created_at n.date n.when "" as n_dt %}{{ n_dt }}
          </div>
          <h3 class="font-semibold mt-1">{{ n.title }}</h3>
          <p class="text-sm text-gray-600 dark:text-gray-300 mt-1">
            {% firstof n.summary n.excerpt n.body n.content n.text "" as n_txt %}
            {{ n_txt|striptags|truncatewords:24 }}
          </p>
          <a href="{% url 'website:news_events' %}" class="text-primary font-medium mt-2 inline-flex items-center gap-1">
            Read more <span aria-hidden="true">→</span>
          </a>
        </div>
      </article>
      {% endfor %}
    {% else %}
      <div class="md:col-span-3 text-gray-500">No news published yet.</div>
    {% endif %}
  </div>

  <!-- EVENTS -->
  <h2 class="text-xl font-semibold mb-1">Events</h2>
  <div class="gold-underline mb-4"></div>
  <div class="grid md:grid-cols-3 gap-6">
    {% if events %}
      {% for e in events %}
      <article class="card news-card overflow-hidden">
        {% if e.image %}<img src="{{ e.image.url }}" class="h-40 w-full object-cover" alt="">{% endif %}
        <div class="p-4">
          <div class="text-xs text-gray-500">
            {% firstof e.start_datetime e.event_date e.date e.starts_on e.start_time e.starts_at e.when e.created_at "" as e_dt %}
            {{ e_dt }}{% if e.location %} • {{ e.location }}{% endif %}
          </div>
          <h3 class="font-semibold mt-1">{{ e.title }}</h3>
          <p class="text-sm text-gray-600 dark:text-gray-300 mt-1">
            {% firstof e.description e.summary e.body e.content e.text "" as e_txt %}
            {{ e_txt|striptags|truncatewords:24 }}
          </p>
          <a href="{% url 'website:news_events' %}" class="text-primary font-medium mt-2 inline-flex items-center gap-1">
            View details <span aria-hidden="true">→</span>
          </a>
        </div>
      </article>
      {% endfor %}
    {% else %}
      <div class="md:col-span-3 text-gray-500">No events yet.</div>
    {% endif %}
  </div>
</section>
{% endblock %}
